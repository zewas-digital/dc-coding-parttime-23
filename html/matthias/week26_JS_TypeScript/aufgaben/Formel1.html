<!-- Hallo, bitte verwende die gegebene Formel 1 API und gibt die Rennresultate der
heurigen Rennen aus. Das Ganze soll so funktionieren, dass ich auf die
Startseite komme und dann alle Rennen der heurigen Saison sehe und mittels einem
Klick auf einen Eintrag werden darunter das Rennresultat angezeigt. Falls das
Rennen noch nicht stattgefunden hat soll einfach der Text "Noch keine Ergebnisse
vorhanden" dargestellt werden. 

Endpunkt für alle Rennen diese Saison: http://ergast.com/api/f1/2024.json

Enpunkt für die Rennergebnisse des ersten Rennens der heurigen Saison: http://ergast.com/api/f1/2024/1/results.json

Enpunkt für die Rennergebnisse des zweiten Rennens der heurigen Saison: http://ergast.com/api/f1/2024/2/results.json

Bonusaufgabe: Erstelle ein Anmeldeformular und
zeige die Rennresultate nur an falls der Benutzer sich mit dem richtigen
Benutzer angemeldet hat. -->
<!DOCTYPE html>
<html>

<head>
    <title>Api-Beispiel</title>
    <style>
        .raceRow {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 10px;   
        }
        .raceRow {
            background-color: goldenrod;
            padding: 10px;
        }

        .raceRow p {
            font-size: 16px;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }
    </style>
</head>

<body>
    <h1>Formel 1 Liste</h1>
    <div id="rennTabelle">
        <h1>
            RaceName
        </h1>
    </div>
    <div id="roundTabelle">
        <h1>
            RaceName
        </h1>
    </div>



    <script>
        fetch(" http://ergast.com/api/f1/2024.json")
            .then((response) => {
                if (!response.ok) {
                    throw new Error("Netzwerkfehler");
                }
                return response.json(); // Konvertiert die Antwort in JSON-Format
            })
            .then(function (data) {
                console.log("Daten vom Server erhalten:", data.MRData.RaceTable.Races[0]);
                for (let x of data.MRData.RaceTable.Races) {
                    var raceRow = document.createElement("div");
                    raceRow.className = "raceRow";

                    var round = document.createElement("p");
                    round.textContent = x.round;

                    var raceName = document.createElement("p");
                    raceName.textContent = x.raceName;

                    var racedate = document.createElement("p");
                    racedate.textContent = x.date;

                    var circut = document.createElement("p");
                    circut.textContent = x.Circuit.circuitName;
                    
                    raceRow.onclick=()=>races(round.textContent);
                    raceRow.append(round, raceName,circut,racedate);

                    document.getElementById("rennTabelle").append(raceRow);

                }
            })
            .catch((error) => {
                console.error("Fehler beim Abrufen der Daten:", error);
            });

        function races(indexSesionRun){
            fetch(" http://ergast.com/api/f1/" + indexSesionRun + "/2024.json")
            .then((response) => {
                if (!response.ok) {
                    throw new Error("Netzwerkfehler");
                }
                return response.json(); // Konvertiert die Antwort in JSON-Format
            })
            .then(function (data) {
                console.log("Daten vom Server erhalten:", data.MRData);
                for (let x of data.MRData.RaceTable.Races) {
                    console.log(x);

                }
            })
            .catch((error) => {
                console.error("Fehler beim Abrufen der Daten:", error);
            });
        }



    </script>

</body>

</html>