<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Calculator</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

</head>
<body>
    <div class="calculator">
        <div class="window-controls">
            <div class="window-control red"></div>
            <div class="window-control yellow"></div>
            <div class="window-control green"></div>
        </div>
        <div class="display">🤯</div>
        <div class="buttons">
            <div class="button dark-operator">AC</div>
            <div class="button dark-operator">+/-</div>
            <div class="button dark-operator">%</div>
            <div class="button orange-operator">÷</div>
            <div class="button">7</div>
            <div class="button">8</div>
            <div class="button">9</div>
            <div class="button orange-operator">x</div>
            <div class="button">4</div>
            <div class="button">5</div>
            <div class="button">6</div>
            <div class="button orange-operator">-</div>
            <div class="button">1</div>
            <div class="button">2</div>
            <div class="button">3</div>
            <div class="button orange-operator">+</div>
            <div class="button zero">0</div>
            <div class="button">,</div>
            <div class="button orange-operator equal">=</div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const display = document.querySelector('.display');
            let firstOperand = null;
            let secondOperand = null;
            let currentOperator = null;
            let resetDisplay = true;
        
            document.querySelectorAll('.button').forEach(button => {
                button.addEventListener('click', () => {
                    if (button.classList.contains('dark-operator')) {
                        handleDarkOperator(button.textContent);
                    } else if (button.classList.contains('orange-operator')) {
                        handleOperator(button.textContent);
                    } else {
                        handleNumber(button.textContent);
                    }
                });
            });
        
            function resetCalculator() {
                display.textContent = '🤯';
                firstOperand = null;
                secondOperand = null;
                currentOperator = null;
                resetDisplay = false;
            }
        
            function handleNumber(number) {
                if (resetDisplay || display.textContent === '0' || display.textContent === '🤯') {
                    display.textContent = number;
                    resetDisplay = false;
                } else {
                    display.textContent += number;
                }
            }
        
            function handleOperator(operator) {
                if (currentOperator && !resetDisplay) {
                    calculate();
                } else {
                    firstOperand = parseFloat(display.textContent);
                }
                currentOperator = operator;
                resetDisplay = true;
            }
        
            function handleDarkOperator(text) {
                if (text === 'AC') {
                    resetCalculator();
                } else if (text === '+/-') {
                    display.textContent = parseFloat(display.textContent) * -1;
                } else if (text === '%') {
                    display.textContent = parseFloat(display.textContent) / 100;
                }
            }
        
            function calculate() {
                if (!currentOperator || resetDisplay) return;
        
                secondOperand = parseFloat(display.textContent);
                let result;
        
                switch (currentOperator) {
                    case '+':
                        result = firstOperand + secondOperand;
                        break;
                    case '-':
                        result = firstOperand - secondOperand;
                        break;
                    case 'x':
                        result = firstOperand * secondOperand;
                        break;
                    case '÷':
                        if (secondOperand === 0) {
                            alert('💣ERROR🔥 durch Null teilen? Ernsthaft? Versuchs nochmal😏');
                            display.textContent = '🔥💣DOPPEL ERROR💣🔥';
                            return;
                        } else {
                            result = firstOperand / secondOperand;
                        }
                        break;
                    default:
                        return;
                }
        
                display.textContent = result.toString();
                firstOperand = result;
                resetDisplay = true;
                currentOperator = null;
            }
        
            // Bind the calculate function to the equals button
            document.querySelector('.equal').addEventListener('click', calculate);

            /*
EINE SCRIPT MÖGLICHKEIT MIT DER VERWENDUNG VON EVAL()

// Sicheres laden der html 
document.addEventListener('DOMContentLoaded', () => {
const display = document.querySelector('.display');

// Funktion zum Zurücksetzen des Taschenrechners
function resetCalculator() {
    display.textContent = '🤯'; // Zurücksetzen auf das Ausgangssymbol
}

// Handler für die Zahleneingabe
function handleNumber(number) {
    if (display.textContent === '🤯') {
        display.textContent = number;
    } else {
        display.textContent += number;
    }
}

// Handler für die Operatoren
function handleOperator(operator) {
    if (operator === '÷' || operator === 'x' || operator === '+' || operator === '-') {
        display.textContent += ` ${operator} `;
    }
}

// Funktion zum Berechnen des Ausdrucks
function calculate() {
    if (display.textContent.includes('÷ 0')) {
        alert('💣ERROR🔥 durch Null teilen? Ernsthaft? Versuchs nochmal😏');
        display.textContent = '🔥💣DOPPEL ERROR💣🔥';
        return;
    }
    // Ersetze das x und ÷ durch die JavaScript-Operatoren
    const expression = display.textContent.replace(/x/g, '*').replace(/÷/g, '/');
    try {
        // Sicherheitsbedenken bei `eval` beachten:
        const result = eval(expression);
        display.textContent = result;
    } catch (error) {
        display.textContent = 'Error';
    }
}

// EventListener für alle Buttons
document.querySelectorAll('.button').forEach(button => {
    button.addEventListener('click', () => {
        if (button.classList.contains('dark-operator')) {
            if (button.textContent === 'AC') {
                resetCalculator();
            }
        } else if (button.classList.contains('orange-operator')) {
            if (button.textContent === '=') {
                calculate();
            } else {
                handleOperator(button.textContent);
            }
        } else {
            handleNumber(button.textContent);
        }
    });
});
});
*/
        });
        </script>
        
        
</body>
</html>
