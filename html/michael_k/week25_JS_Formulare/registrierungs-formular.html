<!-- 
    Aufgabe: Registrierungsformular
    1/ Erstelle ein Registrierungsformular mit den Feldern:
    Name, Email, Passwort und einem Registrieren-Button.
    2/ Validiere die Eingaben und gib eine Fehlermeldung aus,
    wenn die Eingaben nicht korrekt sind.
    3/ Bonus: Validiere die E-Mail-Adresse mit einer RegEx und 
    das Passwort auf Länge und Zeichen.
    -->
<!DOCTYPE html>
<html lang="de">
    
    <head>

        <title>Regestrierformular</title>
        <meta content="text/html; charset=utf-8" />

    </head>
    <body>

        <h1>Regestrierformular</h1>

        <form action="" id="kontakt" >
           
            <p>
                <label for="name">Name</label>
                <input type="text" id="name" name="name" minlength="3" required>
            </p>
            <p>
                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" required>
            </p>    
            <p>
                <label for="passwort">Passwort</label>
                <input type="password" id="passwort1" name="passwort" minlength="8" required>
            </p> 
            <p>
                <label for="passwort">Passwort wiederholen</label>
                <input type="password" id="passwort2" name="passwort" minlength="8" required>
            </p>

            <button type="submit">Regestrieren</button>
        
        </form>


        <script>

            var email = document.getElementById('email');
            var passwort1 = document.getElementById('passwort1');
            var passwort2 = document.getElementById('passwort2');

            function validateEmail() {
            const res = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            if (!res.test(email) ){
                    email.setCustomValidity('email ist nicht korrekt');
                    console.log('email inkorrekt');
                } else {
                    email.setCustomValidity('');
                    console.log('email korrekt');
                }  
            }

            var checkPasswordValidity = function() {
                if (passwort1.value != passwort2.value) {
                    passwort2.setCustomValidity('Passwörter müssen übereinstimmen!');
                    console.log('hello');
                } else {
                    passwort2.setCustomValidity('');
                    console.log('bye');
                }        
            };
            
            email.addEventListener('change', validateEmail)
            passwort1.addEventListener('change', checkPasswordValidity);
            passwort2.addEventListener('change', checkPasswordValidity);
            
        </script>

    </body>

</html>